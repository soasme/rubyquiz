#!/usr/bin/env bash
#
# A Simple start script for starting rubyquiz application as daemon in
# development environment.
#
# Example:
#
#    $ QUIZ_CONFIG=config/example.yml ./bin/start_server
#
# Stop daemon:
# 
#    $ pkill -INT rubyquiz
#
# In production, you can push $QUIZ_CONFIG to /etc/thin/ and then
# use systemd service to manage all thin processes 
#

# If $QUIZ_CONFIG is not specified, this script will crash.
# $QUIZ_CONFIG is a path of file generated by `thin config -C /path/to/your/config.yml`.
if [[ -z $QUIZ_CONFIG ]]; then
 echo 'Please specify $QUIZ_CONFIG first.'
 exit 1
fi

# start thin server as daemon
exec thin start -C $QUIZ_CONFIG -d
